# 人生脚本 v0.2 - 四象限时间管理 + DeepSeek AI

## ✨ 新功能

### 1️⃣ **四象限时间管理**
基于《高效能人士的七个习惯》提出的四象限法则：
- 🔴 **重要且紧急** (Do First) - 危机、紧迫问题
- 🔵 **重要不紧急** (Schedule) - 规划、成长、预防
- 🟡 **不重要但紧急** (Delegate) - 打扰、某些信息、某些会议
- 🟢 **不重要不紧急** (Eliminate) - 消遣、网络搜索

### 2️⃣ **Flomo 式标签管理**
- 输入 `#标签名` 快速添加任务标签
- 自动按四象限颜色分类
- **标签持久化**：自动保存到浏览器本地存储（不丢失）
- 支持多个标签，点击切换选中状态

### 3️⃣ **真实 DeepSeek AI 分析**
- 基于你的四象限数据和周复盘内容
- 自动生成专业的时间管理建议
- 需要配置 DeepSeek API Key

---

## 🚀 快速开始

### 方式 A：Web 版本（推荐多设备使用）

**第一步：创建 .env 文件**

在项目根目录创建 `.env` 文件（复制 `.env.example` 并填写你的 API Key）：

```bash
# .env 文件内容
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxx
```

**第二步：启动后端**

```bash
cd "/Users/bangbangdazhouxiaobai/Documents/人生脚本-时间管理app"
npm run server
```

看到以下消息说明成功：
```
🎬 Life Script Server 运行于 http://localhost:3000
📱 局域网访问: http://192.168.0.101:3000
```

**第三步：打开浏览器**

电脑：`http://localhost:3000`  
手机：`http://192.168.0.101:3000`

---

### 方式 B：Electron 桌面版

```bash
npm start
```

---

## 📝 如何获取 DeepSeek API Key

1. 访问 [DeepSeek 开发者平台](https://platform.deepseek.com)
2. 注册账号 / 登录
3. 点击 **"API Keys"** 或 **"秘钥"**
4. 创建新的 API Key
5. 复制密钥到 `.env` 文件中

### API Key 示例：
```
sk-xxxxx...xxxxx
```

---

## 💡 使用教程

### 添加任务标签

**在四象限中添加标签：**

1. 选择一个象限（如 🔴 重要且紧急）
2. 在输入框中输入：`#deadline`
3. 按 Enter 或点击 `+` 按钮
4. 标签自动添加并按该象限的颜色显示

**点击标签切换选中状态：**
- 点亮标签 = 已完成
- 暗淡标签 = 未完成

### 同步数据

1. 输入你的用户 ID（如：xiaoming）
2. 点击 **"☁️ 同步"** → 保存到服务器
3. 在其他设备访问同一个网址
4. 输入相同的用户 ID 并同步 → 获取所有数据

**本地存储（浏览器）**：自动保存，无需手动操作

### AI 分析建议

1. 在 **"周复盘"** 页面填写：
   - 🌟 高光时刻（本周做得好的）
   - 💣 穿帮镜头（遗憾/未完成）
   - 💡 导演思考（下周计划）

2. 点击 **"✨ 呼叫 DeepSeek 分析数据"**
3. AI 会基于你的四象限和复盘内容给出建议

### 导出图片分享

点击 **"📸 导出图片"** → 自动下载当前页面为 PNG

---

## 🔧 配置调试

### 检查 API Key 是否成功加载

打开浏览器开发者工具 → 查看后端日志，应该看到：
```
[✓] DeepSeek API 已配置
```

### 如果 AI 分析返回错误

1. 确认 `.env` 文件中 API Key 正确
2. 检查 API Key 余额 / 配额
3. 检查网络连接

### 标签未保存？

- ✅ 本地存储：自动保存到浏览器（关闭浏览器也不丢失）
- ✅ 服务器同步：点击 **"☁️ 同步"** 手动保存

---

## 📱 手机安装 PWA

### iOS（苹果）
1. Safari 打开 `http://电脑IP:3000`
2. 分享 → "添加到主屏幕"
3. 点 "添加"

### Android（安卓）
1. Chrome 打开 `http://电脑IP:3000`
2. 菜单 → "安装应用"
3. 确认

---

## 📊 数据存储位置

- **浏览器本地**：`localStorage` （Web 版本）
- **服务器**：`./data/{userId}.json`
- **Electron**：`~/Library/Application Support/Electron/life-script.json`

---

## ⚠️ 注意事项

1. **API Key 安全**：不要把 `.env` 上传到 Git，已添加到 `.gitignore`
2. **流量消耗**：每次 AI 分析都会消耗 API 配额，根据内容长度收费
3. **网络要求**：AI 功能需要网络连接

---

## 🆘 常见问题

**Q：标签不保存？**  
A：检查是否点击了 "☁️ 同步" 或浏览器是否允许 localStorage

**Q：手机连接不上？**  
A：确保电脑和手机在同一个 WiFi，检查防火墙设置

**Q：AI 分析返回错误？**  
A：检查 API Key 是否正确、配额是否充足

**Q：如何重置所有数据？**  
A：浏览器清除本地存储，或删除 `./data/{userId}.json` 文件

---

## 版本更新

### v0.2（当前）
- ✅ 四象限时间管理
- ✅ Flomo 式标签交互
- ✅ 标签持久化存储
- ✅ DeepSeek AI 集成
- ✅ PWA 支持

### v0.1
- 基础时间管理
- Mock AI 分析

---

祝你使用愉快！🎬
